<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Python on LightEnglishr</title>
    <link>/tags/python/</link>
    <description>Recent content in Python on LightEnglishr</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Fri, 17 Mar 2023 00:00:00 +0000</lastBuildDate><atom:link href="/tags/python/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>使用Python研究比尔克林顿政治演讲中的连接词</title>
      <link>https://hidadeng.github.io/post/2023-03-16-study-of-linking-words-in-political-speeches-of-bill-clinton-using-python/</link>
      <pubDate>Fri, 17 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>/post/2023-03-16-study-of-linking-words-in-political-speeches-of-bill-clinton-using-python/</guid>
      <description>以威廉·杰斐逊·克林顿 (William Jefferson Clinton) 的著作《比尔·克林顿总统的演讲》(Speeches of President Bill Clinton)为载体，其中收录比尔·克林顿的 37 篇演讲。使用Python编程，对其中的连接词进行特定分组以及词频统计分析，揭示了政治家的言论如何在特定环境中被用来发展权力、影响力和对民众的控制，以及它们如何被用来揭示政治家的目标和野心。</description>
      <content:encoded><![CDATA[<h2 id="study-of-linking-words-in-political-speeches-of-bill-clinton-using-python-使用python研究比尔克林顿政治演讲中的连接词">Study of linking words in political speeches of Bill Clinton using Python 使用Python研究比尔克林顿政治演讲中的连接词</h2>
<p>该论文发表在PNAS：</p>
<blockquote>
<p>M. Karp, N. Kunanets, A. Burtnyk, O. Melnychuk, I. Bekhta and I. Shainer, &ldquo;<strong>Study of linking words in political speeches of Bill Clinton using Python</strong>,&rdquo; <em>2022 IEEE 17th International Conference on Computer Sciences and Information Technologies (CSIT)</em>, Lviv, Ukraine, 2022, pp. 77-82, doi: 10.1109/CSIT56902.2022.10000437.</p>
</blockquote>
<p><br><br></p>
<p>作者指出：计算语言学被定义为一个广泛的领域，其中计算机程序、组织的计算机技术和数据处理被用来模拟语言在特定情况和问题领域的功能，以及计算机语言模型在语言学和相关学科中的使用.计算语言学主要关注收集、积累、处理和检索信息过程的语言支持。Python 是一种简单而强大的高级面向对象编程语言，具有出色的语言数据处理能力。 Python 创始人 Guido van Rossum 的主要目标是为广泛的人群创建一种简单易懂的编程语言。如今，没有文本分析和处理的项目是不完整的。Python 拥有广泛的库和框架来完成各种任务。任务可以是微不足道的：文本音调分析、实体识别，以及更有趣的机器人、支持聊天中的对话。此外，应用的多样性也令人赏心悦目，这表明 Python 可以巧妙地解决广泛的任务。</p>
<p>作者以威廉·杰斐逊·克林顿 (William Jefferson Clinton) 的著作《比尔·克林顿总统的演讲》(Speeches of President Bill Clinton)为载体，其中收录比尔·克林顿的 37 篇演讲。使用Python编程，对其中的连接词进行特定分组以及词频统计分析，揭示了政治家的言论如何在特定环境中被用来发展权力、影响力和对民众的控制，以及它们如何被用来揭示政治家的目标和野心。</p>
<h2 id="下载资料">下载资料</h2>
<ul>
<li><a href="%E4%BD%BF%E7%94%A8Python%E7%A0%94%E7%A9%B6%E6%AF%94%E5%B0%94%E5%85%8B%E6%9E%97%E9%A1%BF%E6%94%BF%E6%B2%BB%E6%BC%94%E8%AE%B2%E4%B8%AD%E7%9A%84%E8%BF%9E%E6%8E%A5%E8%AF%8D.pdf">点击下载论文</a></li>
<li><a href="%E4%BD%BF%E7%94%A8Python%E7%A0%94%E7%A9%B6%E6%AF%94%E5%B0%94%E5%85%8B%E6%9E%97%E9%A1%BF%E6%94%BF%E6%B2%BB%E6%BC%94%E8%AE%B2%E4%B8%AD%E7%9A%84%E8%BF%9E%E6%8E%A5%E8%AF%8D.png">点击下载论文pdf框架</a></li>
</ul>
<p><br><br></p>
<h2 id="一研究背景">一、研究背景</h2>
<p>作者指出：通过分析政治言论获得的信息有助于追踪政治家在特定背景下使用的言论对建立权力、影响力和对人民的控制的影响，以及了解政治家的目标和意图。在与人的交流中，主要目标是传递信息并被正确理解。借助特殊的连接词，这将更容易实现，这不仅可以美化语言，还可以帮助对话者理解您的信息主题。而语言研究方法本身直到最近才被用于与政治话语的互动。</p>
<p><br><br></p>
<h2 id="二研究过程">二、研究过程</h2>
<p>研究方法：</p>
<p>使用Python编程语言</p>
<p><br><br></p>
<h2 id="三数据来源">三、数据来源</h2>
<p>威廉·杰斐逊·克林顿 (William Jefferson Clinton) 的著作《比尔·克林顿总统的演讲》(Speeches of President Bill Clinton)为载体，其中收录比尔·克林顿的 37 篇演讲。</p>
<p><br><br></p>
<h2 id="四研究发现">四、研究发现：</h2>
<ol>
<li>
<p>识别了比尔·克林顿在演讲中使用的连接词。分析美国前总统比尔克林顿的演讲，可以确定这位政治家使用了大量属于加法、效果和顺序组的词。比尔·克林顿 (Bill Clinton) 的每一次演讲都需要一些东西并激励我们。他们总是从远方开始。比尔克林顿使用策略来认同人民。这有助于向人们表明他是“他们的”并且可以信任他。比尔·克林顿试图走近人民，代表人民说话。这使得他的演讲更加情绪化，也更容易被普通美国人理解。</p>
</li>
<li>
<p>使用连接词和短语可以提高演讲质量。大多数形式的书面和口头演讲和演示都是以类似的方式组织的，包括问题陈述、自己的观点和结论。连接词和短语充当所说内容各部分之间的桥梁。他们将每个部分组合在一起，以及每个部分中的句子和段落，甚至一个句子中的两个想法。连接词不仅仅是通过改善声音来美化你的语言的口头技巧。这些词具有特殊含义，可以使读者或听众以某种方式思考您的想法并做出反应。</p>
</li>
<li>
<p>政治话语无疑是语言使用的主要领域，长期以来一直吸引着研究者的兴趣。这是因为政治话语是一种复杂的人类活动，值得批判性研究，特别是因为它在社会组织和管理中的核心地位。</p>
</li>
<li>
<p>政治演讲不仅仅是展示领导人魅力的机会。它在大多数人无法访问数字平台的国家尤其有帮助，因为说话是直接与他们互动的最佳方式。这项研究的结果将有助于确定通过使用各种语言技术进行有效政治交流的基本原则。</p>
</li>
</ol>
<p><br><br></p>
<h2 id="五论文框架">五、论文框架</h2>
<p><img loading="lazy" src="%e4%bd%bf%e7%94%a8Python%e7%a0%94%e7%a9%b6%e6%af%94%e5%b0%94%e5%85%8b%e6%9e%97%e9%a1%bf%e6%94%bf%e6%b2%bb%e6%bc%94%e8%ae%b2%e4%b8%ad%e7%9a%84%e8%bf%9e%e6%8e%a5%e8%af%8d.png" alt="img"  />
</p>
<h2 id="六代码">六、代码</h2>
<p>请点击下载论文</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>PNAS | 历史文本中的语言积极性反映了动态的环境和心理因素(含Python代码)</title>
      <link>https://hidadeng.github.io/post/2023-03-13-linguistic-positivity-in-historical-texts-reflects-dynamic-environmental-and-psychological-factors/</link>
      <pubDate>Wed, 15 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>/post/2023-03-13-linguistic-positivity-in-historical-texts-reflects-dynamic-environmental-and-psychological-factors/</guid>
      <description>Linguistic positivity in historical texts reflects dynamic environmental and psychological factors历史文本中的语言积极性反映了动态的环境和心理因素</description>
      <content:encoded><![CDATA[<p>分享一篇研究语言积极倾向的论文，论文中使用Python工具进行词频统计，大大降低了人工成本，提高了科研效率。</p>
<p>该论文发表在PNAS：</p>
<blockquote>
<p>Iliev, R., Hoover, J., Dehghani, M. and Axelrod, R., 2016. <strong>Linguistic positivity in historical texts reflects dynamic environmental and psychological factors</strong>. <em>Proceedings of the National Academy of Sciences</em>, <em>113</em>(49), pp.E7871-E7879.</p>
</blockquote>
<p><br><br></p>
<h2 id="下载资料">下载资料</h2>
<ul>
<li>
<p><a href="code.ipynb">下载代码</a></p>
</li>
<li>
<p><a href="yearly_american_speech_dataset.csv">下载数据</a></p>
</li>
<li>
<p><a href="%E5%8E%86%E5%8F%B2%E6%96%87%E6%9C%AC%E4%B8%AD%E7%9A%84%E8%AF%AD%E8%A8%80%E7%A7%AF%E6%9E%81%E6%80%A7%E5%8F%8D%E6%98%A0%E4%BA%86%E5%8A%A8%E6%80%81%E7%9A%84%E7%8E%AF%E5%A2%83%E5%92%8C%E5%BF%83%E7%90%86%E5%9B%A0%E7%B4%A0.pdf">论文脑图pdf</a></p>
</li>
</ul>
<p><img loading="lazy" src="%e5%8e%86%e5%8f%b2%e6%96%87%e6%9c%ac%e4%b8%ad%e7%9a%84%e8%af%ad%e8%a8%80%e7%a7%af%e6%9e%81%e6%80%a7%e5%8f%8d%e6%98%a0%e4%ba%86%e5%8a%a8%e6%80%81%e7%9a%84%e7%8e%af%e5%a2%83%e5%92%8c%e5%bf%83%e7%90%86%e5%9b%a0%e7%b4%a0.pdf" alt=""  />
</p>
<p><br><br></p>
<h2 id="一研究背景">一、研究背景</h2>
<p>作者指出：当前关于 <strong>LPB(language positivity bias)作用机制</strong> 的驱动因素有普遍的普遍的认知偏差、情感状态、客观环境和社会规范，但是究竟是哪种机制驱动LPB，以及这种影响是否可能是由于这些或其他因素子集之间的相互作用驱动的，尚无研究讨论。造成这种不确定性的一个原因是，以前对 LPB 的调查采用了语言的共时方法，并且无法提供任何洞察力来了解 LPB 在给定语言中是否或在何种程度上具有跨时间和上下文的稳定。在该研究中，作者采用了一种将 LPB 视为动态现象的方法。具体来说，使用两个带时间戳的美国英语语料库，研究 LPB 中的经度变化作为主观、客观和社会因素的函数。这种方法可以研究 LPB 的历时变化，这是一个未探索的影响维度，而且还可以在先前提出的 LPB 解释之间进行裁决。</p>
<p><br><br></p>
<h2 id="二研究过程">二、研究过程</h2>
<p>提出五个假设：</p>
<ol>
<li>
<p>LPB没有线性趋势</p>
</li>
<li>
<p>LPB 随着时间的推移而增加。</p>
</li>
<li>
<p>LPB 随着时间的推移而减少。</p>
</li>
<li>
<p>LPB 的变化来预测，环境恶化将与LPB的降低相关联。</p>
</li>
<li>
<p>LPB的变化将通过集体影响的变化来预测，因此国家层面幸福感的下降将与LPB的下降相关。</p>
</li>
</ol>
<p>开展四个研究：</p>
<ol>
<li>
<p>线性趋势</p>
</li>
<li>
<p>战争伤亡人数</p>
</li>
<li>
<p>经济苦难</p>
</li>
<li>
<p>主观幸福</p>
</li>
</ol>
<p><br><br></p>
<h2 id="三数据来源">三、数据来源</h2>
<ol>
<li><strong>情感词典</strong>：使用了语言查询和字数统计 (LIWC) 词典 (56) 中的正面和负面情绪词类别，其中包含 907 个词和词干。正面类别有 408 个条目，负面类别有 499 个条目。</li>
<li><strong>战争伤亡人数</strong>：使用了来自美国退伍军人事务部 (57) 的情况说明书中的数据，并计算了过去两个世纪美国参与的战争中美国军人的平均伤亡人数。</li>
<li><strong>痛苦指数</strong>：使用了来自 <a href="https://www.miseryindex.us">www.miseryindex.us</a> 的数据，其中包含 1948 年至 2015 年期间美国的苦难指数指标。</li>
<li><strong>幸福指数</strong>：使用了世界幸福数据库中有关美国幸福感的调查数据。</li>
</ol>
<p><br><br></p>
<h2 id="四研究发现">四、研究发现：</h2>
<ol>
<li>美式英语中情感词的使用随着时间的推移而减少。</li>
<li>发现了 LPB 纵向下降趋势的令人信服的证据。这种趋势在谷歌 Ngrams 语料库中非常强烈，在纽约时报语料库中略显重要。</li>
<li>发现 LPB 也随着战争的伤亡人数而减少。</li>
<li>LPB 可以通过客观环境的不太极端的测量来预测。在控制时间后，我们发现痛苦指数较高的年份在两个语料库中的 LPB 水平往往较低。</li>
<li>发现 LPB 的短期波动随全国幸福指数的变化而变化。</li>
<li>这些结果进一步证实了LPB 不能简单地解释为普遍认知机制的功能。</li>
</ol>
<p><br><br></p>
<h2 id="五论文框架">五、论文框架</h2>
<p>![Linguistic positivity in historical texts reflects dynamic environmental and psychological factors](/Users/tiffany/Desktop/Linguistic positivity in historical texts reflects dynamic environmental and psychological factors.png)</p>
<h2 id="六代码">六、代码</h2>
<p>为简化学习难度，论文细节部分不展开。本文主要给大家展示用Python做情感词频统计、词频历时折线图这两部分内容。先安装需要的包</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">!pip3 install pyecharts==1.6.2
</span></span><span class="line"><span class="cl">!pip3 install pyecharts-javascripthon==0.0.6              
</span></span><span class="line"><span class="cl">!pip3 install pyecharts-jupyter-installer==0.0.3              
</span></span><span class="line"><span class="cl">!pip3 install pyecharts-snapshot==0.2.0 
</span></span></code></pre></div><br>
<h3 id="51-实验数据集">5.1 实验数据集</h3>
<p>美国政治在其年轻的生命周期中经历了许多意识形态的动荡。这些动荡被称为政治时代。“政治时代是指在历史和政治科学中使用的一种美国政治模式，用于分类存在于美国的政党制度。” 数据集作者创建这个数据集的原因是为了正确讨论过去的政治事件，了解各个时期的政治平台和氛围是很重要的。例如，民主党和共和党的政治理念在不同的时期发生了巨大的变化，党派之间的理念也在不断转变、涌现和消失。截至目前为止，美国政治中已经公认了6个政治时代，分别是：</p>
<ol>
<li>第一党派制度（1792年至1824年）</li>
<li>第二党派制度（1828年至1854年）</li>
<li>第三党派制度（1854年至1895年）</li>
<li>第四党派制度（1896年至1932年）</li>
<li>第五党派制度（1932年至1964年）</li>
<li>第六党派制度（1964年至今）</li>
</ol>
<p>我将总统同一个年度的演讲汇总到一起，最终得到  <a href="yearly_american_speech_dataset.csv">yearly_american_speech_dataset.csv</a> 。
<br></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;yearly_american_speech_dataset.csv&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span>
</span></span></code></pre></div><p><img loading="lazy" src="img/df1.png" alt=""  />
</p>
<br>
<h3 id="52-小实验">5.2 小实验</h3>
<p>写代码讲究先把任务抽象化， 将大问题拆解成可组装的小问题。即先小后大，先局部后整体。这里推荐用Python中的cntext库，该库文档清晰，代码简洁。先安装</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">!pip3 install scikit-learn==1.0
</span></span><span class="line"><span class="cl">!pip3 install cntext==1.8.4
</span></span></code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;What a sunny day!&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">diction</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sunny&#39;</span><span class="p">,</span> <span class="s1">&#39;good&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">           <span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span> <span class="s1">&#39;terrible&#39;</span><span class="p">]}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ct</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">diction</span><span class="o">=</span><span class="n">diction</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
</span></span></code></pre></div><p>Run</p>
<pre><code>{'pos_num': 1,
 'neg_num': 0,
 'stopword_num': 1,
 'word_num': 5,
 'sentence_num': 1}
</code></pre>
<br>
<p>根据自定义的词典diciton， 可以看出 <strong>What a sunny day!</strong> 中有1个pos类词，0个neg类词。</p>
<br>
<h3 id="53-找个公开的情感词典">5.3 找个公开的情感词典</h3>
<p>计算文本中正负面情感词出现次数， 需要有情感词词表。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#查看cntext内置的词典</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ct</span><span class="o">.</span><span class="n">dict_pkl_list</span><span class="p">()</span>
</span></span></code></pre></div><pre><code>['DUTIR.pkl',
 'HOWNET.pkl',
 'Chinese_Loughran_McDonald_Financial_Sentiment.pkl',
 'sentiws.pkl',
 'ChineseFinancialFormalUnformalSentiment.pkl',
 'Chinese_Digitalization.pkl',
 'ANEW.pkl',
 'LSD2015.pkl',
 'NRC.pkl',
 'geninqposneg.pkl',
 'HuLiu.pkl',
 'Loughran_McDonald_Financial_Sentiment.pkl',
 'AFINN.pkl',
 'ADV_CONJ.pkl',
 'STOPWORDS.pkl',
 'Concreteness.pkl',
 'ChineseEmoBank.pkl']
</code></pre>
<p>查看NRC词典的信息</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#NRC词典</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NRC词典描述: &#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;Desc&#39;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NRC参考文献: &#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;Refer&#39;</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NRC词典内词表有: &#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Pos词表前10个词: &#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;positive&#39;</span><span class="p">][:</span><span class="mi">10</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Neg词表前10个词: &#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;negative&#39;</span><span class="p">][:</span><span class="mi">10</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span></code></pre></div><pre><code>NRC词典描述:  The NRC Emotion Lexicon is a list of English words and their associations with eight basic emotions (anger, fear, anticipation, trust, surprise, sadness, joy, and disgust) and two sentiments (negative and positive). The annotations were manually done by crowdsourcing.

NRC参考文献:  Crowdsourcing a Word-Emotion Association Lexicon, Saif Mohammad and Peter Turney, Computational Intelligence, 29 (3), 436-465, 2013.

NRC词典内词表有:  dict_keys(['anger', 'anticipation', 'disgust', 'fear', 'joy', 'negative', 'positive', 'sadness', 'surprise', 'trust'])

Pos词表前10个词:  ['abba', 'ability', 'abovementioned', 'absolute', 'absolution', 'absorbed', 'abundance', 'abundant', 'academic', 'academy']

Neg词表前10个词:  ['abandon', 'abandoned', 'abandonment', 'abduction', 'aberrant', 'aberration', 'abhor', 'abhorrent', 'abject', 'abnormal']
</code></pre>
<br>
<h3 id="54-情感词频统计">5.4 情感词频统计</h3>
<p>使用cntext设计一个函数，将计算得到的文本词数/正(负)面词出现次数, 得到情感词在文中的占比，方便后续的可视化绘图。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">emotion_analysis</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">diction</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;positive&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;negative&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;anger&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;anger&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;anticipation&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;anticipation&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;disgust&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;disgust&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;fear&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;fear&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;joy&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;joy&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;sadness&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;sadness&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;surprise&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;surprise&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">               <span class="s1">&#39;trust&#39;</span><span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;NRC.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;NRC&#39;</span><span class="p">][</span><span class="s1">&#39;trust&#39;</span><span class="p">]}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                       <span class="n">diction</span><span class="o">=</span><span class="n">diction</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                       <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#实验ok</span>
</span></span><span class="line"><span class="cl"><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;What a sunny day!&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">emotion_analysis</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>
</span></span></code></pre></div><p>Run</p>
<pre><code>pos_num             1
neg_num             0
anger_num           0
anticipation_num    1
disgust_num         0
fear_num            0
joy_num             1
sadness_num         0
surprise_num        1
trust_num           0
stopword_num        1
word_num            5
sentence_num        1
dtype: int64
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Transcript&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">emotion_analysis</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><p><img loading="lazy" src="img/df2.png" alt=""  />
<br></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df2</span><span class="o">.</span><span class="n">columns</span>
</span></span></code></pre></div><p>Run</p>
<pre><code>Index(['pos_num', 'neg_num', 'anger_num', 'anticipation_num', 'disgust_num',
       'fear_num', 'joy_num', 'sadness_num', 'surprise_num', 'trust_num',
       'stopword_num', 'word_num', 'sentence_num'],
      dtype='object')
</code></pre>
<br>
<p>计算情感、情绪的词频(占比)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;pos_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">grouped_df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;neg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;neg_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;anger&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;anger_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;anticipation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;anticipation_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;disgust&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;disgust_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;fear&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;fear_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;joy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;joy_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;sadness&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;sadness_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;surprise&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;surprise_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;trust&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s1">&#39;trust_num&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;word_num&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;SentiScore&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;pos_num&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;neg_num&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;pos_num&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;neg_num&#39;</span><span class="p">])</span>
</span></span></code></pre></div><br>
<p>合并数据数据</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">res_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><p><img loading="lazy" src="img/df3.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="七可视化">七、可视化</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">res_df</span><span class="o">.</span><span class="n">columns</span>
</span></span></code></pre></div><p>Run</p>
<pre><code>Index(['pos_num', 'neg_num', 'anger_num', 'anticipation_num', 'disgust_num',
       'fear_num', 'joy_num', 'sadness_num', 'surprise_num', 'trust_num',
       'stopword_num', 'word_num', 'sentence_num', 'pos', 'neg', 'anger',
       'anticipation', 'disgust', 'fear', 'joy', 'sadness', 'surprise',
       'trust'],
      dtype='object')
</code></pre>
<p><br>![截屏2023-03-13 15.02.09](/Users/tiffany/Library/Application Support/typora-user-images/截屏2023-03-13 15.02.09.png)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts</span> <span class="kn">import</span> <span class="n">options</span> <span class="k">as</span> <span class="n">opts</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Line</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts.globals</span> <span class="kn">import</span> <span class="n">CurrentConfig</span><span class="p">,</span> <span class="n">NotebookType</span>
</span></span><span class="line"><span class="cl"><span class="n">CurrentConfig</span><span class="o">.</span><span class="n">NOTEBOOK_TYPE</span> <span class="o">=</span> <span class="n">NotebookType</span><span class="o">.</span><span class="n">JUPYTER_NOTEBOOK</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建折线图对象</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加 x 轴和 y 轴数据</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart1</span><span class="o">.</span><span class="n">add_xaxis</span><span class="p">(</span><span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart1</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;Sentiment Score&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;SentiScore&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                     <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 配置图表选项</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart1</span><span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;美国总统演讲情感得分年度历时可视化&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">tooltip_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TooltipOpts</span><span class="p">(</span><span class="n">trigger</span><span class="o">=</span><span class="s2">&#34;axis&#34;</span><span class="p">,</span> <span class="n">axis_pointer_type</span><span class="o">=</span><span class="s2">&#34;cross&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">legend_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LegendOpts</span><span class="p">(</span><span class="n">pos_right</span><span class="o">=</span><span class="s2">&#34;right&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">orient</span><span class="o">=</span><span class="s2">&#34;vertical&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">pos_top</span><span class="o">=</span><span class="s2">&#34;center&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示图表</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart1</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">()</span>
</span></span></code></pre></div><p><a href="line_chart1.html"><img loading="lazy" src="img/%e5%9b%be1.png" alt=""  />
</a></p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts</span> <span class="kn">import</span> <span class="n">options</span> <span class="k">as</span> <span class="n">opts</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Line</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts.globals</span> <span class="kn">import</span> <span class="n">CurrentConfig</span><span class="p">,</span> <span class="n">NotebookType</span>
</span></span><span class="line"><span class="cl"><span class="n">CurrentConfig</span><span class="o">.</span><span class="n">NOTEBOOK_TYPE</span> <span class="o">=</span> <span class="n">NotebookType</span><span class="o">.</span><span class="n">JUPYTER_NOTEBOOK</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建折线图对象</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart2</span> <span class="o">=</span> <span class="n">Line</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加 x 轴和 y 轴数据</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart2</span><span class="o">.</span><span class="n">add_xaxis</span><span class="p">(</span><span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart2</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;Positive&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart2</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;Negative&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;neg&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 配置图表选项</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart2</span><span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;美国总统演讲正、负面情感年度历时可视化&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">tooltip_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TooltipOpts</span><span class="p">(</span><span class="n">trigger</span><span class="o">=</span><span class="s2">&#34;axis&#34;</span><span class="p">,</span> <span class="n">axis_pointer_type</span><span class="o">=</span><span class="s2">&#34;cross&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">legend_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LegendOpts</span><span class="p">(</span><span class="n">pos_right</span><span class="o">=</span><span class="s2">&#34;right&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">orient</span><span class="o">=</span><span class="s2">&#34;vertical&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">pos_top</span><span class="o">=</span><span class="s2">&#34;center&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示图表</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart2</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">()</span>
</span></span></code></pre></div><p><a href="line_chart2.html"><img loading="lazy" src="img/%e5%9b%be2.png" alt=""  />
</a><br></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts</span> <span class="kn">import</span> <span class="n">options</span> <span class="k">as</span> <span class="n">opts</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Line</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pyecharts.globals</span> <span class="kn">import</span> <span class="n">CurrentConfig</span><span class="p">,</span> <span class="n">NotebookType</span>
</span></span><span class="line"><span class="cl"><span class="n">CurrentConfig</span><span class="o">.</span><span class="n">NOTEBOOK_TYPE</span> <span class="o">=</span> <span class="n">NotebookType</span><span class="o">.</span><span class="n">JUPYTER_NOTEBOOK</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建折线图对象</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span> <span class="o">=</span> <span class="n">Line</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加 x 轴和 y 轴数据</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_xaxis</span><span class="p">(</span><span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;anger&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;anger&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;anticipation&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;anticipation&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;disgust&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;disgust&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;fear&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;fear&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;joy&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;joy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;sadness&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;sadness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;surprise&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;surprise&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s1">&#39;trust&#39;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                      <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;trust&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                      <span class="n">itemstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">ItemStyleOpts</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 配置图表选项</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;美国总统8类情绪词用量年度历时可视化&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">tooltip_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TooltipOpts</span><span class="p">(</span><span class="n">trigger</span><span class="o">=</span><span class="s2">&#34;axis&#34;</span><span class="p">,</span> <span class="n">axis_pointer_type</span><span class="o">=</span><span class="s2">&#34;cross&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">legend_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LegendOpts</span><span class="p">(</span><span class="n">pos_right</span><span class="o">=</span><span class="s2">&#34;right&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">orient</span><span class="o">=</span><span class="s2">&#34;vertical&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">pos_top</span><span class="o">=</span><span class="s2">&#34;center&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示图表</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">()</span>
</span></span></code></pre></div><p><a href="line_chart3.html"><img loading="lazy" src="img/%e5%9b%be3.png" alt=""  />
</a>
<a href="line_chart3.html"><img loading="lazy" src="img/%e5%9b%be4.png" alt=""  />
</a></p>
<p>最后一张图中trust指标在08年前后几年是下降趋势，可能的原因是， 那个阶段正是08年金融危机，美国政府为了救华尔街， 用公民腰包里的钱补贴华尔街金融巨鳄，以至于总统都不好意思传达太多信任的信息。</p>
<p><br><br></p>
<h2 id="八保存">八、保存</h2>
<p>情感计算过程得到的 res_df 和 可视化结果line_chart 建议都保存起来， 方便下次可以快速进入可视化阶段。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">res_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;sentiment_anlysis_result.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart1</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;line_chart1.html&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart2</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;line_chart2.html&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">line_chart3</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;line_chart3.html&#39;</span><span class="p">)</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    
  </channel>
</rss>
